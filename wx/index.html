<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>WeatherLog</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@tabler/core@1.0.0-beta17/dist/js/tabler.min.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/core@1.0.0-beta17/dist/css/tabler.min.css" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    </head>
    <body class="theme-dark">
        <div class="wrapper">
            <div class="page-wrapper">
                <div class="container-xl">
                    <div class="page-header d-print-none">
                        <div class="row align-items-center">
                            <div class="col">
                                <div class="page-pretitle">
                                    Przegląd
                                </div>
                                <h2 class="page-title">
                                    Wrocław, Polska,&nbsp;<span id="time-utc"></span><span style="font-size: 12px">(UTC)</span>
                                </h2>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="page-body">
                <div class="container-xl">
                    <div class="row row-deck row-cards">

                        <div class="col-sm-6 col-lg-6">
                            <div class="card">
                                <div class="card-body">

                                    <div class="d-flex align-items-center">
                                        <div class="subheader">Temperatura</div>
                                    </div>
                                    <div class="h1 mb-3"><span id="temp"></span>&deg;C</div>

                                </div>
                            </div>
                        </div>

                        <div class="col-sm-6 col-lg-6">
                            <div class="card">
                                <div class="card-body">

                                    <div class="d-flex align-items-center">
                                        <div class="subheader">Wilgotność powietrza</div>
                                    </div>
                                    <div class="h1 mb-3"><span id="hum"></span>%</div>

                                </div>
                            </div>
                        </div>
                      

                        <div class="col-sm-9 col-md-9 col-lg-9">
                            <div class="card">
                                <div class="card-body">
                                    <h3 class="subheader">Stacja</h3>
                                    <div>
                                        <p>
                                            Amatorska stacja pogodowa oparta o czujnik DHT11, proste api w express.js, oraz mikrokontroler NodeMcu v3. Całość zamontowana na maszcie, zamknięta w hermetycznej obudowie. Sensor zainstalowany został we własnoręcznie wykonanej osłonie przeciwsłonecznej.
                                        </p>
                                        <p>
                                            Planowana jest stała rozbudowa o kolejne czujniki oraz wykresy z wyborem przedziałów czasowych.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>   

                        <div class="col-sm-3 col-lg-3 col-md-3">
                            <div class="card">
                                <a href="https://cdn.discordapp.com/attachments/933334090151772204/1219976981916155944/IMG_20240320_122720.jpg?ex=660d431a&is=65face1a&hm=98f4599b3a0ba4cae36a9364fd4db9f689680ac3f5318dfdac844eb7b237b01d&" title="Kliknij aby powiększyć">
                                    <img style="padding: 2px; border-radius: 4px" alt="Stacja" src="https://cdn.discordapp.com/attachments/933334090151772204/1219976981916155944/IMG_20240320_122720.jpg?ex=660d431a&is=65face1a&hm=98f4599b3a0ba4cae36a9364fd4db9f689680ac3f5318dfdac844eb7b237b01d&"/>
                                </a>
                            </div>
                        </div>

                        <div class="col-sm-9 col-lg-9">
                            <div class="card">
                                <div class="card-body">
                                    <div class="d-flex align-items-center">
                                        <div class="subheader">DevLog</div>
                                    </div>
                                    <ol reversed="reversed">
                                        <li>
                                            <p>
                                                <b>Rozbudowa</b> - 22.03.2024<br/>
                                                Rozbudowano stronę internetową o opis stacji, statystyki, godzinę ostatniego pomiaru oraz kartę kontakt.
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <b>Montaż stacji w przejściowym miejscu.</b> - 20.03.2024<br/>
                                                Po długim czasie czujnik został zamontowany w docelowej obudowie, niestety nie w miejscu docelowym.
                                                <br/>
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <b>Uruchomienie stacji</b> - 10.01.2024<br/>
                                                Uruchomienie testowej konfiguracji stacji wraz z prostym api. Stworzenie prostego widoku HTML do testów.
                                            </p>
                                        </li>
                                    </ol>
                                </div>
                            </div>
                        </div>


                        <div class="col-sm-3 col-lg-3">
                            <div class="card">
                                <div class="card-body">
                                    <div class="d-flex align-items-center">
                                        <div class="subheader">Statystyki</div>
                                    </div>
                                    <div class="mb-3" style="">
                                        <ul>
                                            <li>Żądania POST: <b><span id="stat-post"></span></b></li>
                                            <li>Żądania GET: <b><span id="stat-get"></span></b></li>
                                            <li>Rozmiar żądań POST: <b><span id="stat-size"></span></b></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-12 col-lg-12">
                            <div class="card">
                                <div class="card-body">
                                    <div class="d-flex align-items-center">
                                        <div class="subheader">kontakt</div>
                                    </div>
                                    <div class="mb-3">
                                        <ul>
                                            <li>Adres e-mail: <a href="mailto:" title="Wyślij wiadomość e-mail">wojtasss298@gmail.com</a></li>
                                            <li>Discord: wojtasss298</li>
                                        </ul>                                      
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <footer class="footer footer-transparent d-print-none">
                    <div class="container">
                        <div class="row text-center align-items-center flex-row-reverse">
                            <!--<div class="col-lg-auto ms-lg-auto">
                                <ul class="list-inline list-inline-dots mb-0">
                                    <li class="list-inline-item"><a href="#" class="link-secondary">Home</a></li>
                                    <li class="list-inline-item"><a href="#" class="link-secondary">About</a></li>
                                    <li class="list-inline-item"><a href="#" class="link-secondary">DevLog</a></li>
                                    <li class="list-inline-item"><a href="#" class="link-secondary">Status</a></li>
                                    <li class="list-inline-item"><a href="#" class="link-secondary">Contact</a></li>
                                    <li class="list-inline-item"><a href="#" class="link-secondary">FAQ</a></li>
                                    <li class="list-inline-item"><a href="#" class="link-secondary">Docs</a></li>
                                </ul>
                            </div>-->
                            <div class="col-12 col-lg-auto mt-3 mt-lg-0">
                                <ul class="list-inline list-inline-dots mb-0">
                                    <li class="list-inline-item">wojtasss298 &copy; 2022 - <script>document.write(new Date().getFullYear())</script></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </footer>
            </div>
        </div>
        <script>

            var weather = "https://frog01-20507.wykr.es/get/data";
            $.getJSON(weather, function (response) {
                document.getElementById("temp").innerHTML = Number(response.temperature);
                document.getElementById("hum").innerHTML = Number(response.humidity);
                document.getElementById("time-utc").innerHTML = response.time;    
                                
            })

            var stats = "https://frog01-20507.wykr.es/stats";
            $.getJSON(stats, function (response) {
                
                document.getElementById("stat-post").innerHTML = response["POST /post/data 201"];
                document.getElementById("stat-get").innerHTML = response["GET /get/data 200"];

                let bajty = response["POST /post/data 201"]*60;

                if (bajty<1024){
                    let size = bajty.toFixed(2) + "B"
                    document.getElementById("stat-size").innerHTML = size;
                } else if (bajty<1024*1024){
                    let size = (bajty/1024).toFixed(2) + "KB"
                    document.getElementById("stat-size").innerHTML = size;
                } else if (bajty<1024*1024*1024){
                    let size = (bajty/1024/1024).toFixed(2) + "MB"
                    document.getElementById("stat-size").innerHTML = size;
                } else if (bajty<1024*1024*1024*1024){
                    let size = (bajty/1024/1024/1024).toFixed(2) + "GB"
                    document.getElementById("stat-size").innerHTML = size;
                } 
 
            })
           
        </script>
    </body>
</html>
